@model VirtualGlassesProvider.Models.DTOs.GlassesDTO
@{
    ViewData["Title"] = "Details";
}
<main>
    <hr />
        <h1>
            @Html.DisplayFor(model => model.BrandName)
            @Html.DisplayFor(model => model.Colour)
            @Html.DisplayFor(model => model.Style)
        </h1>
        <div id="productDisplayImageDetailsDiv">
            <div id="imgRender">
            </div>
        </div>
        <br />
        <a id="clearImage" href="">Clear Image</a>
        <br />
        <br />
        <br />
        <br />
        <p>
            <b>@Html.DisplayNameFor(model => model.Price)</b>
        </p>
        <p>
            <b>@Html.DisplayFor(model => model.Price)</b>
        </p>
        <a asp-action="Index">Back to List</a>
</main>
<aside>
    <div>
        <h2>
            @Html.DisplayNameFor(model => model.Description)
        </h2>
        <p>
            @Html.DisplayFor(model => model.Description)
        </p>
        </div>
    <div id="detailsFormsDiv">
        <form id="formCart">
            <label for="size">Size:</label>
            <br />
            <select id="size" name="size">
                <option value="S">S</option>
                <option value="M">M</option>
                <option value="L">L</option>
                <option value="XL">XL</option>
            </select>
            <br />
            <br />
            <input type="submit" id="addProductToCartBtn" name="addProductToCartBtn" value="Add to Cart" aria-label="add to cart button" />
        </form>

        <form id="formAR">
            <label for="buyFor">Buy For:</label>
            <br />
            <select id="size" name="buyFor">
                <option value="self">Self</option>
                <!--ToDo: Populate with more options-->
            </select>
            <br />
            <br />
            <label for="backgroundAR">AR Background:</label>
            <br />
            <select id="backgroundAR" name="backgroundAR">
                <option value="beach">Beach</option>
                <option value="office">Office</option>
                <!--ToDo: Populate with more options-->
            </select>
            <br />
            <br />
            <input type="button" id="generateImageBtn" name="generateImageBtn" value="Try on virtually" aria-label="generate AR image button" />
        </form>  
    </div>
</aside>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        $("#generateImageBtn").click(function () {
            $.ajax({
                type: "GET",
                url: "/Home/GenerateImage/",
                data: { 'glasses': '@this.Model.Image' },
                success: function (viewHTML) {
                    $("#imgRender").html(viewHTML);
                    $("#originalProductImage").hide();
                },
                error: function (errorData) { onError(errorData); }
            });
        });

        $("#clearImage").click(function () {
            $("#imgRender").hide()
            $("#originalProductImage").show();
        });
    });
    window.addEventListener('load', function () {
        $.ajax({
            type: "GET",
            url: "/Home/RenderDefault/",
            data: { 'glasses': '@this.Model.Image', 'brandName': '@this.Model.BrandName' },
            success: function (viewHTML) {
                $("#imgRender").html(viewHTML);
                $("#originalProductImage").hide();
            },
            error: function (errorData) { onError(errorData); }
        });
    })
</script>